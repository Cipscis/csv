!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const{stringify:r,parse:s}=(()=>{const e={stringify:function(t,n){(n=n||{}).transpose=n.transpose||!1,n.sanitise=n.sanitise||!1;let r=t;return r=e._shape(t,n),r=e._escape(r,n),r=e._join(r),r},_shape:function(e,t){const n=t.transpose,r=e.reduce((e,t)=>Math.max(e,t.length),0),s=n?r:e.length,o=n?e.length:r;let i=[];for(let t=0;t<s;t++){let r=[];for(let s=0;s<o;s++){let o=n?s:t,i=n?t:s,u=e[o][i];i>=e[o].length&&(u=""),r.push(u)}i.push(r)}return i},_escape:function(e,t){const n=t.sanitise;for(let t=0;t<e.length;t++){let r=e[t];for(let e=0;e<r.length;e++)void 0===r[e]?r[e]="":"string"!=typeof r[e]&&(r[e]=""+r[e]),n&&r[e].match(/^[=\-+@]/)&&(r[e]="\t"+r[e]),r[e].match(/,|"|\n/)&&(r[e]=r[e].replace(/"/g,'""'),r[e]='"'+r[e]+'"')}return e},_join:function(e){for(let t=0;t<e.length;t++)e[t]=e[t].join(",");return e=e.join("\n")},parse:function(t,n){let r=e._tokenise(t);return e._validate(r),n&&n.mapper&&(r=r.map(e=>e.map(n.mapper))),r},_tokenise:function(e){let t=[];e=e.replace(/\r/g,"");let n=!1,r=!1,s=0,o=[];for(let i=0;i<e.length;i++){let u=e[i],l=","===u,a='"'===u,c="\n"===u,f=i===e.length-1;if(n)if(a){if('"'===e[i+1]){i++;continue}if(n=!1,r=!0,!f)continue}else if(f)throw new Error("CSV parse: Reached end of file before ending quote. At index "+i);if(!n&&(l||c||f)){let n=e.substring(s,i+1);(l||c)&&(n=n.substring(0,n.length-1)),r&&(r=!1,n=n.substring(1,n.length-1),n=n.replace(/""/g,'"')),o.push(n),l&&f&&o.push(""),(c||f)&&(t.push(o),c&&(o=[])),s=i+1}else{if(r)throw new Error("CSV parse: A value must be complete immediately after closing a quote. At index "+i);a&&(n=!0)}}return t},_validate:function(e){if(e&&e.length>1){let t=e[0].length;for(let n=1;n<e.length;n++){if(e[n].length!==t)throw new Error(`CSV parse: Row ${n} does not have the same length as the first row (${t})`)}}}};return{stringify:e.stringify,parse:e.parse}})(),o=[["Numbers",0,1,2,3],["Test values","test",{test:!0}],["Falsey values",!1,"",[],null],["Values to sanitise","=GET(malicious_code)","-FETCH(url)","+DO(nefarious_thing)","@POST(data)"]],i="Numbers,0,1,2,3\nTest values,test,{test: true},,\nFalsey values,false,'',[],null\nValues to sanitise,=GET(malicious_code),-FETCH(url),+DO(nefarious_thing),@POST(data)";document.querySelectorAll(".js-stringify__button").forEach(e=>e.addEventListener("click",()=>{const e=document.querySelector(".js-stringify__input"),t=document.querySelector(".js-stringify__output"),n=document.querySelector(".js-stringify__transpose"),s=document.querySelector(".js-stringify__sanitise"),i=n instanceof HTMLInputElement&&n.checked,u=s instanceof HTMLInputElement&&s.checked,l=r(o,{transpose:i,sanitise:u});e.innerHTML=JSON.stringify(o,null,"\t"),t.innerHTML=l})),document.querySelectorAll(".js-parse__button").forEach(e=>e.addEventListener("click",()=>{const e=document.querySelector(".js-parse__input"),t=document.querySelector(".js-parse__output"),n=document.querySelector(".js-parse__map-integers"),r={};n instanceof HTMLInputElement&&n.checked&&(r.mapper=e=>+e===parseInt(e,10)?+e:e);const o=s(i,r);e.innerHTML=i,t.innerHTML=JSON.stringify(o,null,"\t")}))}]);
//# sourceMappingURL=bundle.js.map