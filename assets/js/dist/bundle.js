!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const{stringify:r,parse:s}=(()=>{const e={stringify:function(t,n){(n=n||{}).transpose=n.transpose||!1,n.sanitise=n.sanitise||!1;let r=t;return r=e._shape(t,n),r=e._escape(r,n),r=e._join(r),r},_shape:function(e,t){const n=t.transpose,r=e.reduce((e,t)=>Math.max(e,t.length),0),s=n?r:e.length,i=n?e.length:r;let o=[];for(let t=0;t<s;t++){let r=[];for(let s=0;s<i;s++){let i=n?s:t,o=n?t:s,u=e[i][o];o>=e[i].length&&(u=""),r.push(u)}o.push(r)}return o},_escape:function(e,t){const n=t.sanitise;for(let t=0;t<e.length;t++){let r=e[t];for(let e=0;e<r.length;e++)void 0===r[e]?r[e]="":"string"!=typeof r[e]&&(r[e]=""+r[e]),n&&r[e].match(/^[=\-+@]/)&&(r[e]="\t"+r[e]),r[e].match(/,|"|\n/)&&(r[e]=r[e].replace(/"/g,'""'),r[e]='"'+r[e]+'"')}return e},_join:function(e){for(let t=0;t<e.length;t++)e[t]=e[t].join(",");return e=e.join("\n")},parse:function(t,n){let r=e._tokenise(t);return e._validate(r),n&&n.mapper&&(r=r.map(e=>e.map(n.mapper))),r},_tokenise:function(e){let t=[];e=e.replace(/\r/g,"");let n=!1,r=!1,s=0,i=[];for(let o=0;o<e.length;o++){let u=e[o],l=","===u,a='"'===u,c="\n"===u,f=o===e.length-1;if(n)if(a){if('"'===e[o+1]){o++;continue}if(n=!1,r=!0,!f)continue}else if(f)throw new Error("CSV parse: Reached end of file before ending quote. At index "+o);if(!n&&(l||c||f)){let n=e.substring(s,o+1);(l||c)&&(n=n.substring(0,n.length-1)),r&&(r=!1,n=n.substring(1,n.length-1),n=n.replace(/""/g,'"')),i.push(n),l&&f&&i.push(""),(c||f)&&(t.push(i),c&&(i=[])),s=o+1}else{if(r)throw new Error("CSV parse: A value must be complete immediately after closing a quote. At index "+o);a&&(n=!0)}}return t},_validate:function(e){if(e&&e.length>1){let t=e[0].length;for(let n=1;n<e.length;n++){if(e[n].length!==t)throw new Error(`CSV parse: Row ${n} does not have the same length as the first row (${t})`)}}}};return{stringify:e.stringify,parse:e.parse}})(),i=[["Numbers",0,1,2,3],["Test values","test",{test:!0}],["Falsey values",!1,"",[],null],["Values to sanitise","=GET(malicious_code)","-FETCH(url)","+DO(nefarious_thing)","@POST(data)"]],o="Numbers,0,1,2,3\nTest values,test,{test: true},,\nFalsey values,false,'',[],null\nValues to sanitise,=GET(malicious_code),-FETCH(url),+DO(nefarious_thing),@POST(data)";document.querySelectorAll(".js-stringify__button").forEach(e=>e.addEventListener("click",()=>{let e=document.querySelector(".js-stringify__input"),t=document.querySelector(".js-stringify__output"),n=document.querySelector(".js-stringify__transpose"),s=document.querySelector(".js-stringify__sanitise"),o={transpose:n.checked,sanitise:s.checked},u=r(i,o);e.innerHTML=JSON.stringify(i,null,"\t"),t.innerHTML=u})),document.querySelectorAll(".js-parse__button").forEach(e=>e.addEventListener("click",()=>{let e=document.querySelector(".js-parse__input"),t=document.querySelector(".js-parse__output"),n={};document.querySelector(".js-parse__map-integers").checked&&(n.mapper=e=>+e===parseInt(e,10)?+e:e);let r=s(o,n);e.innerHTML=o,t.innerHTML=JSON.stringify(r,null,"\t")}))}]);
//# sourceMappingURL=bundle.js.map